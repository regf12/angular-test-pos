(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{111:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(149))},112:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(151))},114:function(e,t,r){"use strict";function o(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),o(r(159)),o(r(156)),o(r(155))},116:function(e,t){function r(e){return Promise.resolve().then(function(){var t=new Error('Cannot find module "'+e+'".');throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=116},146:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(81),c=function(){function e(e){this.router=e}return e.prototype.canActivate=function(e,t){return!!localStorage.getItem("currentUser")||(this.router.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)},e=o([i.Injectable({providedIn:"root"}),n("design:paramtypes",[a.Router])],e)}();t.AuthGuard=c},147:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(146))},148:function(e,t){e.exports='    <h2>Login</h2>\r\n    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">\r\n        <div class="form-group">\r\n            <label for="email">Email</label>\r\n            <input type="text" formControlName="email" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.email.errors }" />\r\n            <div *ngIf="submitted && f.email.errors" class="invalid-feedback">\r\n                <div *ngIf="f.email.errors.required">Email is required</div>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="password">Password</label>\r\n            <input type="password" formControlName="password" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.password.errors }" />\r\n            <div *ngIf="submitted && f.password.errors" class="invalid-feedback">\r\n                <div *ngIf="f.password.errors.required">Password is required</div>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <button [disabled]="loading" class="btn btn-primary">Login</button>\r\n            <img width="30px" height="30px" *ngIf="loading" src="https://myaccount.wigan.gov.uk/web/Images/loader.gif"/>\r\n        </div>\r\n        <div *ngIf="error" class="alert alert-danger">{{error}}</div>\r\n    </form>'},149:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(81),c=r(115),s=r(49),u=r(82),f=function(){function e(e,t,r,o){this.formBuilder=e,this.route=t,this.router=r,this.authenticationService=o,this.submitted=!1,this.loading=!1,this.error=""}return e.prototype.ngOnInit=function(){this.loginForm=this.formBuilder.group({email:["admin@mail.com",c.Validators.required],password:["admin",c.Validators.required]}),this.authenticationService.logout(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"},Object.defineProperty(e.prototype,"f",{get:function(){return this.loginForm.controls},enumerable:!0,configurable:!0}),e.prototype.onSubmit=function(){var e=this;this.submitted=!0,this.loginForm.invalid||(this.loading=!0,this.authenticationService.login(this.f.email.value,this.f.password.value).pipe(s.first()).subscribe(function(t){e.router.navigate([e.returnUrl])},function(t){e.error=t,e.loading=!1}))},e=o([i.Component({template:r(148)}),n("design:paramtypes",[c.FormBuilder,a.ActivatedRoute,a.Router,u.AuthenticationService])],e)}();t.LoginComponent=f},150:function(e,t){e.exports='<h1>Home</h1>\r\n<p>You\'re logged in with Angular 6 & JWT!!</p>\r\n<div>\r\n    Users from secure api end point:\r\n    <ul>\r\n        <li *ngFor="let user of users">{{user.firstName}} {{user.lastName}}</li>\r\n    </ul>\r\n</div>\r\n<p><a [routerLink]="[\'/login\']">Logout</a></p>'},151:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(49),c=r(82),s=function(){function e(e){this.userService=e,this.users=[]}return e.prototype.ngOnInit=function(){var e=this;this.userService.getAll().pipe(a.first()).subscribe(function(t){e.users=t})},e=o([i.Component({template:r(150)}),n("design:paramtypes",[c.UserService])],e)}();t.HomeComponent=s},152:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(81),n=r(112),i=r(111),a=r(147),c=[{path:"",component:n.HomeComponent,canActivate:[a.AuthGuard]},{path:"login",component:i.LoginComponent},{path:"**",redirectTo:""}];t.routing=o.RouterModule.forRoot(c)},153:function(e,t){e.exports='\x3c!-- main app container --\x3e\r\n<div class="jumbotron">\r\n    <div class="container">\r\n        <div class="row">\r\n            <div class="col-sm-6 offset-sm-3">\r\n                <router-outlet></router-outlet>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},154:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(){}return e=o([n.Component({selector:"app",template:r(153)})],e)}();t.AppComponent=i},155:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=function(){function e(){}return e.prototype.intercept=function(e,t){var r=JSON.parse(localStorage.getItem("currentUser"));return r&&r.token&&(e=e.clone({setHeaders:{Authorization:"Bearer "+r.token}})),t.handle(e)},e=o([i.Injectable(),n("design:paramtypes",[])],e)}();t.JwtInterceptor=a},156:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(65),c=r(110),s=r(49),u=function(){function e(){}return e.prototype.intercept=function(e,t){var r={id:1,username:"test",password:"test",firstName:"Test",lastName:"User"};return c.of(null).pipe(s.mergeMap(function(){if(e.url.endsWith("/users/authenticate")&&"POST"===e.method){if(e.body.username===r.username&&e.body.password===r.password){var o={id:r.id,username:r.username,firstName:r.firstName,lastName:r.lastName,token:"0000-fake-jwt-token-0000"};return c.of(new a.HttpResponse({status:200,body:o}))}return c.throwError({error:{message:"Username or Password is incorrect."}})}return e.url.endsWith("/users")&&"GET"===e.method?"Bearer 0000-fake-jwt-token-0000"===e.headers.get("Authorization")?c.of(new a.HttpResponse({status:200,body:[r]})):c.throwError({error:{message:"Unauthorized"}}):t.handle(e)})).pipe(s.materialize()).pipe(s.delay(500)).pipe(s.dematerialize())},e=o([i.Injectable(),n("design:paramtypes",[])],e)}();t.FakeBackendInterceptor=u,t.fakeBackendProvider={provide:a.HTTP_INTERCEPTORS,useClass:u,multi:!0}},157:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(65),c=function(){function e(e){this.http=e}return e.prototype.getAll=function(){return this.http.get("http://laravel-server.test/api/users")},e=o([i.Injectable({providedIn:"root"}),n("design:paramtypes",[a.HttpClient])],e)}();t.UserService=c},158:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(65),c=r(49),s=function(){function e(e){this.http=e}return e.prototype.login=function(e,t){return this.http.post("http://laravel-server.test/api/login",{email:e,password:t}).pipe(c.map(function(e){return e&&e.meta.token&&localStorage.setItem("currentUser",JSON.stringify(e)),e}))},e.prototype.logout=function(){localStorage.removeItem("currentUser")},e=o([i.Injectable({providedIn:"root"}),n("design:paramtypes",[a.HttpClient])],e)}();t.AuthenticationService=s},159:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(110),c=r(49),s=r(82),u=function(){function e(e){this.authenticationService=e}return e.prototype.intercept=function(e,t){var r=this;return t.handle(e).pipe(c.catchError(function(e){401===e.status&&(r.authenticationService.logout(),location.reload(!0));var t=e.error.message||e.statusText;return a.throwError(t)}))},e=o([i.Injectable(),n("design:paramtypes",[s.AuthenticationService])],e)}();t.ErrorInterceptor=u},160:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(59),a=r(115),c=r(65),s=r(114),u=r(154),f=r(152),l=r(114),p=r(112),d=r(111),m=function(){function e(){}return e=o([n.NgModule({imports:[i.BrowserModule,a.ReactiveFormsModule,c.HttpClientModule,f.routing],declarations:[u.AppComponent,p.HomeComponent,d.LoginComponent],providers:[{provide:c.HTTP_INTERCEPTORS,useClass:l.JwtInterceptor,multi:!0},{provide:c.HTTP_INTERCEPTORS,useClass:l.ErrorInterceptor,multi:!0},s.fakeBackendProvider],bootstrap:[u.AppComponent]})],e)}();t.AppModule=m},214:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(213),r(189),r(161)},215:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(214);var o=r(145),n=r(160);o.platformBrowserDynamic().bootstrapModule(n.AppModule)},82:function(e,t,r){"use strict";function o(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),o(r(158)),o(r(157))}},[[215,0,1]]]);